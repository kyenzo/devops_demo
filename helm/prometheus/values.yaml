# Minimal Prometheus + Grafana for basic cluster monitoring
# Optimized for t3.small nodes

# Common labels
commonLabels:
  environment: prod
  managedBy: argocd
  project: eks-demo

# Prometheus Operator - required
prometheusOperator:
  enabled: true

# Prometheus - core metrics collection
prometheus:
  enabled: true
  prometheusSpec:
    retention: 1d
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: gp3
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 2Gi

# Grafana - visualization
grafana:
  enabled: true
  adminUser: admin
  persistence:
    enabled: true
    storageClassName: gp3
    size: 2Gi
  datasources:
    datasources.yaml:
      apiVersion: 1
      datasources:
        - name: Prometheus
          type: prometheus
          url: http://kube-prometheus-stack-prometheus:9090
          access: proxy
          isDefault: true

# Disable everything else
alertmanager:
  enabled: false

nodeExporter:
  enabled: true

kubeStateMetrics:
  enabled: true

# Disable optional components
kubeApiServer:
  enabled: false
kubelet:
  enabled: true
kubeControllerManager:
  enabled: false
coreDns:
  enabled: false
kubeEtcd:
  enabled: false
kubeScheduler:
  enabled: false
kubeProxy:
  enabled: false
