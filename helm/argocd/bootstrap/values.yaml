# Default values for ArgoCD installation
argo-cd:
  global:
    domain: argocd.jack-devops.local  # Can be updated with real domain later

  configs:
    params:
      # Enable server-side diff for better performance
      server.insecure: true  # For demo purposes; use HTTPS in production

    cm:
      # Repository configuration
      repositories: |
        - type: git
          url: https://github.com/kyenzo/devops_demo.git
          name: devops-demo-repo

      # Resource customizations
      resource.customizations.health.argoproj.io_Application: |
        hs = {}
        hs.status = "Progressing"
        hs.message = ""
        if obj.status ~= nil then
          if obj.status.health ~= nil then
            hs.status = obj.status.health.status
            if obj.status.health.message ~= nil then
              hs.message = obj.status.health.message
            end
          end
        end
        return hs

  # Server configuration
  server:
    service:
      type: LoadBalancer  # For demo access; use NodePort + ingress in production
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
        service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"

    # Resource limits
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi

  # Controller configuration
  controller:
    resources:
      limits:
        cpu: 1000m
        memory: 1Gi
      requests:
        cpu: 500m
        memory: 512Mi

  # Repo server configuration
  repoServer:
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi

  # Redis for caching
  redis:
    enabled: true
    resources:
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi

  # Disable HA mode for cost optimization (single replica)
  redis-ha:
    enabled: false

  # Notifications and other optional components
  notifications:
    enabled: false  # Can be enabled later

  applicationSet:
    enabled: true  # Enable ApplicationSet for advanced patterns

# Common labels matching project standards
commonLabels:
  environment: prod
  managedBy: helm
  project: eks-demo
